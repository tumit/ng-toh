"use strict";(self.webpackChunkng_toh=self.webpackChunkng_toh||[]).push([[284],{3284:(j,d,o)=>{o.r(d),o.d(d,{HeroesModule:()=>T});var u=o(6895),l=o(433),m=o(8306),p=o(727);class v extends p.w0{constructor(t,e){super()}schedule(t,e=0){return this}}const a={setInterval(n,t,...e){const{delegate:s}=a;return s?.setInterval?s.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){const{delegate:t}=a;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var y=o(8737);const f={now:()=>(f.delegate||Date).now(),delegate:void 0};class h{constructor(t,e=h.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,s){return new this.schedulerActionCtor(this,t).schedule(s,e)}}h.now=f.now;const b=new class w extends h{constructor(t,e=h.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let s;this._active=!0;do{if(s=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,s){for(;t=e.shift();)t.unsubscribe();throw s}}}(class g extends v{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const s=this.id,i=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(i,s,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this}requestAsyncId(t,e,s=0){return a.setInterval(t.flush.bind(t,this),s)}recycleAsyncId(t,e,s=0){if(null!=s&&this.delay===s&&!1===this.pending)return e;a.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(t,e);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i,s=!1;try{this.work(t)}catch(c){s=!0,i=c||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:s}=e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,y.P)(s,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}});var C=o(3532);var F=o(9300),I=o(3900),U=o(4004);function N(n){return t=>function A(n=0,t,e=b){let s=-1;return null!=t&&((0,C.K)(t)?e=t:s=t),new m.y(i=>{let c=function H(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;c<0&&(c=0);let B=0;return e.schedule(function(){i.closed||(i.next(B++),0<=s?this.schedule(void 0,s):i.complete())},c)})}(800).pipe((0,F.h)(e=>!!t.value),(0,I.w)(()=>n.existsName(t.value)),(0,U.U)(e=>e?.length>0?{existsName:!0}:null))}var r=o(8256),Z=o(529);let S=(()=>{class n{constructor(e){this.httpClient=e,this.baseUrl="http://localhost:8080/heroes"}getHeroes(){return this.httpClient.get(this.baseUrl)}getHero(e){return this.httpClient.get(this.baseUrl+"/"+e)}updateHero(e){return this.httpClient.put(this.baseUrl+"/"+e.id,e)}addNewHero(e){return this.httpClient.post(this.baseUrl,e)}deleteHero(e){return this.httpClient.delete(this.baseUrl+"/"+e)}existsName(e){return this.httpClient.get(this.baseUrl+"?name="+e)}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(Z.eN))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const x=function(n){return{"is-invalid":n}};let G=(()=>{class n{constructor(e,s){this.heroService=e,this.location=s,this.heroFormGroup=new l.cw({id:new l.NI,name:new l.NI("",{nonNullable:!0,asyncValidators:N(this.heroService)})})}ngOnInit(){}onBack(){this.location.back()}onSave(){!this.heroFormGroup.controls.name.value||(this.heroFormGroup.get("id")?.value?this.heroService.updateHero(this.heroFormGroup.getRawValue()).subscribe(()=>this.onBack()):this.heroService.addNewHero(this.heroFormGroup.getRawValue()).subscribe(()=>this.onBack()))}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(S),r.Y36(u.Ye))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-hero-form"]],decls:18,vars:10,consts:[[3,"formGroup"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],[1,"d-flex","justify-content-between"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(e,s){if(1&e&&(r.TgZ(0,"form",0)(1,"h4"),r._uU(2),r.ALo(3,"uppercase"),r.qZA(),r.TgZ(4,"label",1),r._uU(5,"Hero name"),r.qZA(),r._UZ(6,"input",2),r.TgZ(7,"div",3),r._uU(8,"name already exists"),r.qZA()(),r._UZ(9,"hr"),r.TgZ(10,"div",4)(11,"button",5),r.NdJ("click",function(){return s.onBack()}),r._uU(12,"Back"),r.qZA(),r.TgZ(13,"button",6),r.NdJ("click",function(){return s.onSave()}),r._uU(14,"Save"),r.qZA()(),r._UZ(15,"hr"),r._uU(16),r.ALo(17,"json")),2&e){let i;r.Q6J("formGroup",s.heroFormGroup),r.xp6(2),r.hij(" ",r.lcZ(3,4,null==(i=s.heroFormGroup.get("name"))?null:i.value)," "),r.xp6(4),r.Q6J("ngClass",r.VKq(8,x,s.heroFormGroup.controls.name.errors)),r.xp6(10),r.hij(" ",r.lcZ(17,6,s.heroFormGroup.value),"\n")}},dependencies:[u.mk,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,u.gd,u.Ts]}),n})();var k=o(791);const J=[{path:"hero-form",component:G}];let T=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[u.ez,l.UX,k.Bz.forChild(J)]}),n})()}}]);